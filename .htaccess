
# Caching schema
<FilesMatch "\.(png|css|js|svg|jpg)$">
    Header set Cache-Control "max-age=0"
</FilesMatch>

# Prevent viewing of .htaccess file
<Files .htaccess>
    order allow,deny
    deny from all
</Files>

# Prevent directory listings
Options All -Indexes

# Enable MultiViews and URL rewriting
Options +MultiViews
RewriteEngine On
RewriteBase /

# Handle series clean URLs
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^series/([^/]+)/([^/]+)/?$ /series/index.html [L]

# Remove .html extension from URLs
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^(.*)$ $1.html [NC,L]

# Redirect old series URL format to new format
RewriteCond %{QUERY_STRING} ^id=(.*)&series=(.*)$
RewriteRule ^series/?$ /series/%2/%1? [R=301,L]

//Custom 400 errors
ErrorDocument 400 /error/404.html